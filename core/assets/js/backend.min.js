window.eoxiaJS.digirisk={},window.eoxiaJS.digirisk.core={},window.eoxiaJS.digirisk.core.init=function(){window.eoxiaJS.digirisk.core.event()},window.eoxiaJS.digirisk.core.event=function(){jQuery(document).on("click",".digirisk-wrap .wpeo-notification.patch-note.notification-active",window.eoxiaJS.digirisk.core.openPopup),jQuery(document).on("click",".digirisk-wrap .wpeo-notification.patch-note .notification-close",window.eoxiaJS.digirisk.core.closeNotification),jQuery(document).on("click",".popup-update-manager .back-update",window.eoxiaJS.digirisk.core.confirmBack)},window.eoxiaJS.digirisk.core.openPopup=function(i){i.stopPropagation(),i.preventDefault(),jQuery(".digirisk-wrap .wpeo-modal.patch-note").addClass("modal-active")},window.eoxiaJS.digirisk.core.closeNotification=function(i){i.stopPropagation(),jQuery(this).closest(".wpeo-notification").removeClass("notification-active")},window.eoxiaJS.digirisk.core.confirmBack=function(i){if(!confirm("La mise à jour de vos données est requises. Êtes vous sur de vouloir annuler la mise à jour ?"))return i.preventDefault(),!1},window.eoxiaJS.digirisk.input={},window.eoxiaJS.digirisk.input.init=function(){window.eoxiaJS.digirisk.input.event()},window.eoxiaJS.digirisk.input.event=function(){jQuery(document).on("keyup",".digirisk-wrap .form-element input, .digirisk-wrap .form-element textarea",window.eoxiaJS.digirisk.input.keyUp)},window.eoxiaJS.digirisk.input.keyUp=function(i){0<jQuery(this).val().length?jQuery(this).closest(".form-element").addClass("active"):jQuery(this).closest(".form-element").removeClass("active")},window.eoxiaJS.digirisk.accident={},window.eoxiaJS.digirisk.accident.canvas=[],window.eoxiaJS.digirisk.accident.init=function(){window.eoxiaJS.digirisk.accident.event(),window.eoxiaJS.digirisk.accident.refresh()},window.eoxiaJS.digirisk.accident.refresh=function(){window.eoxiaJS.digirisk.accident.canvas=document.querySelectorAll("canvas");for(var i=0;i<window.eoxiaJS.digirisk.accident.canvas.length;i++)window.eoxiaJS.digirisk.accident.canvas[i].signaturePad=new SignaturePad(window.eoxiaJS.digirisk.accident.canvas[i],{penColor:"rgb(66, 133, 244)"});window.eoxiaJS.digirisk.accident.resizeCanvas()},window.eoxiaJS.digirisk.accident.event=function(){jQuery(document).on("change",'.flex-table.accident .col.advanced input[type="checkbox"]',window.eoxiaJS.digirisk.accident.changeSelectAccidentInvestigation),jQuery(document).on("click",".flex-table.accident .col.advanced .fa-eraser",window.eoxiaJS.digirisk.accident.clearCanvas),jQuery(document).on("keyup",".flex-table.accident .col.add input, textarea",window.eoxiaJS.digirisk.accident.checkCanAdd),window.addEventListener("resize",window.eoxiaJS.digirisk.accident.resizeCanvas)},window.eoxiaJS.digirisk.accident.changeSelectAccidentInvestigation=function(i){jQuery(this).closest(".investigation-group").find(".investigation-media").addClass("hidden"),jQuery(this).is(":checked")&&jQuery(this).closest(".investigation-group").find(".investigation-media").removeClass("hidden")},window.eoxiaJS.digirisk.accident.clearCanvas=function(i){jQuery(this).closest("div").find("canvas")[0].signaturePad.clear()},window.eoxiaJS.digirisk.accident.checkCanAdd=function(i){var e=jQuery(this).closest(".col");e.find('input[name="accident[victim_identity_id]"]').val()&&e.find('input[name="accident[parent_id]"]').val()&&e.find("textarea").val()?e.find(".action-input").removeClass("button-disable"):e.find(".action-input").addClass("button-disable")},window.eoxiaJS.digirisk.accident.resizeCanvas=function(i){for(var e=Math.max(window.devicePixelRatio||1,1),t=0;t<window.eoxiaJS.digirisk.accident.canvas.length;t++)window.eoxiaJS.digirisk.accident.canvas[t].width=window.eoxiaJS.digirisk.accident.canvas[t].offsetWidth*e,window.eoxiaJS.digirisk.accident.canvas[t].height=window.eoxiaJS.digirisk.accident.canvas[t].offsetHeight*e,window.eoxiaJS.digirisk.accident.canvas[t].getContext("2d").scale(e,e),window.eoxiaJS.digirisk.accident.canvas[t].signaturePad.clear()},window.eoxiaJS.digirisk.accident.editedAccidentSuccess=function(i,e){e.data.add?(i.closest(".flex-table.accident").find(".table-body").prepend(e.data.view),jQuery('.flex-table.accident .col.advanced:first input[type="text"]:first').focus()):i.closest(".digirisk-wrap").replaceWith(e.data.view),window.eoxiaJS.digirisk.accident.refresh()},window.eoxiaJS.digirisk.accident.loadedAccidentSuccess=function(i,e){i.closest(".col").replaceWith(e.data.view),window.eoxiaJS.digirisk.accident.refresh(),jQuery(".col.advanced[data-id="+e.data.id+"] canvas").each(function(){jQuery(this)[0].signaturePad.clear(),jQuery(this).closest("div").find(".url").val()&&jQuery(this)[0].signaturePad.fromDataURL(jQuery(this).closest("div").find(".url").val())})},window.eoxiaJS.digirisk.accident.deletedAccidentSuccess=function(i,e){i.closest(".col").fadeOut()},window.eoxiaJS.digirisk.accident.generatedAccidentBenin=function(i,e){jQuery(".document-accident-benins").replaceWith(e.data.view)},window.eoxiaJS.digirisk.accident.generatedRegistreATBenin=function(i,e){jQuery('.tab-list .tab-element[data-target="digi-registre-accident"]').click()},window.eoxiaJS.digirisk.accident.editedStoppingDaySuccess=function(i,e){i.closest("div").html(e.data.view)},window.eoxiaJS.digirisk.accident.deletedStoppingDay=function(i,e){i.closest(".comment").fadeOut()},window.eoxiaJS.digirisk.accident.checkStoppingDayData=function(i){return i.closest(".tooltip.active").removeClass("active"),!isNaN(i.closest(".comment").find(".is-number").val())&&""!=i.closest(".comment").find(".is-number").val()||(i.closest(".tooltip").addClass("active"),!1)},window.eoxiaJS.digirisk.accident.checkDataBeforeAdd=function(i){var e=i.closest(".col");return e.find(".tooltip").removeClass("active"),""===e.find('input[name="accident[victim_identity_id]"]').val()?(e.find('input[name="accident[victim_identity_id]"]').closest(".tooltip").addClass("active"),!1):""===e.find('input[name="accident[parent_id]"]').val()?(e.find('input[name="accident[parent_id]"]').closest(".tooltip").addClass("active"),!1):""!==e.find("textarea").val()||(e.find("textarea").closest(".tooltip").addClass("active"),!1)},window.eoxiaJS.digirisk.accident.checkAllData=function(i){var e=!0;if(jQuery(".accident.flex-table .tooltip.active").removeClass("active"),jQuery(".accident.flex-table .comment:not(.new) .is-number").each(function(){!isNaN(jQuery(this).val())&&""!=jQuery(this).val()||(jQuery(this).closest(".tooltip").addClass("active"),e=!1)}),jQuery(".accident.flex-table .comment.new .is-number").each(function(){isNaN(jQuery(this).val())&&(jQuery(this).closest(".tooltip").addClass("active"),e=!1)}),!e)return!1;var t=jQuery(i).closest(".col.advanced").attr("data-id");return jQuery(i).closest('.col.advanced[data-id="'+t+'"]').find("canvas").each(function(){jQuery(this)[0].signaturePad.isEmpty()||jQuery(this).closest("div").find("input:first").val(jQuery(this)[0].toDataURL())}),!0};var digi_chemical_product={$:void 0,init:function(i,e){digi_chemical_product.$=e,!i&&void 0!==i||digi_chemical_product.event()},event:function(){digi_chemical_product.$(document).on("click",".form-chemical-product .wp-digi-action-new",function(i){digi_chemical_product.edit_chemical_product(i,digi_chemical_product.$(this))}),digi_chemical_product.$(document).on("click",".wp-digi-chemical-product .wp-digi-action-delete",function(i){digi_chemical_product.delete_chemical_product(i,digi_chemical_product.$(this))}),digi_chemical_product.$(document).on("click",".wp-digi-chemical-product .wp-digi-action-load",function(i){digi_chemical_product.load_chemical_product(i,digi_chemical_product.$(this))})},edit_chemical_product:function(i,e){digi_chemical_product.$(e).closest("form").ajaxSubmit({beforeSubmit:function(){digi_chemical_product.$(".wp-digi-content").addClass("wp-digi-bloc-loading")},success:function(i){digi_chemical_product.$(".wp-digi-content").removeClass("wp-digi-bloc-loading"),digi_chemical_product.$(".wp-digi-chemical-product.wp-digi-list").replaceWith(i.data.template)}})},delete_chemical_product:function(i,e){if(i.preventDefault(),window.confirm(window.digi_confirm_delete)){var t=digi_chemical_product.$(e).data("id");digi_chemical_product.$(".wp-digi-content").addClass("wp-digi-bloc-loading");var a={action:"wpdigi-delete-chemical_product",_wpnonce:digi_chemical_product.$(e).data("nonce"),global:digi_chemical_product.$(e).data("global"),chemical_product_id:t};digi_chemical_product.$.post(window.ajaxurl,a,function(){digi_chemical_product.$(".wp-digi-content").removeClass("wp-digi-bloc-loading"),digi_chemical_product.$('.wp-digi-list .wp-digi-list-item[data-chemical-product-id="'+t+'"]').fadeOut()})}},load_chemical_product:function(i,e){i.preventDefault(),digi_chemical_product.send_chemical_product();var t=digi_chemical_product.$(e).data("id");digi_chemical_product.$(".wp-digi-content").addClass("wp-digi-bloc-loading");var a={action:"load_chemical_product",_wpnonce:digi_chemical_product.$(e).data("nonce"),chemical_product_id:t};digi_chemical_product.$.post(window.ajaxurl,a,function(i){digi_chemical_product.$(".wp-digi-list-item .dashicons-edit").hide(),digi_chemical_product.$(".wp-digi-content").removeClass("wp-digi-bloc-loading"),digi_chemical_product.$('.wp-digi-chemical-product .wp-digi-list-item[data-chemical-product-id="'+t+'"]').replaceWith(i.data.template)})},send_chemical_product:function(){digi_chemical_product.$(".wp-digi-table-item-edit").each(function(){digi_chemical_product.$(this).find(".dashicons-edit").click()})}};window.eoxiaJS.digirisk.causerie={},window.eoxiaJS.digirisk.causerie.canvas,window.eoxiaJS.digirisk.causerie.init=function(){window.eoxiaJS.digirisk.causerie.event(),window.eoxiaJS.digirisk.causerie.refresh()},window.eoxiaJS.digirisk.causerie.refresh=function(){window.eoxiaJS.digirisk.causerie.canvas=document.querySelectorAll("canvas");for(var i=0;i<window.eoxiaJS.digirisk.causerie.canvas.length;i++)window.eoxiaJS.digirisk.causerie.canvas[i].signaturePad=new SignaturePad(window.eoxiaJS.digirisk.causerie.canvas[i],{penColor:"rgb(66, 133, 244)"});jQuery(".causerie-wrap .owl-carousel").owlCarousel({nav:1,loop:1,items:1,dots:!1,navText:['<span class="owl-prev"><i class="fa fa-angle-left fa-8x" aria-hidden="true"></i></span>','<span class="owl-next"><i class="fa fa-angle-right fa-8x" aria-hidden="true"></i></span>']})},window.eoxiaJS.digirisk.causerie.event=function(){jQuery(document).on("change",".wpeo-autocomplete",window.eoxiaJS.digirisk.causerie.updateModalTitle),jQuery(document).on("click",".modal-signature .wpeo-button.button-blue",window.eoxiaJS.digirisk.causerie.saveSignatureURL),jQuery(document).on("click",".causerie-wrap a.disabled",function(i){return i.preventDefault(),!1}),jQuery(document).on("click",".digi-import-add-keyword > .wpeo-button",window.eoxiaJS.digirisk.causerie.addKeywordToTextarea),jQuery(document).on("click",".digi-import-add-keyword .dropdown-content .item",window.eoxiaJS.digirisk.causerie.itemSelectToTextarea),jQuery(document).on("keyup",".digi-import-add-keyword .tm-info-import-link input",window.eoxiaJS.digirisk.causerie.updateImportTextFromUrl)},window.eoxiaJS.digirisk.causerie.updateModalTitle=function(i,t){var a="",o=jQuery(this);if(t&&t.element){var e={action:"causerie_save_former"};e.id=jQuery(this).closest("tr").find('input[name="causerie_id"]').val(),e.user_id=jQuery(this).closest("tr").find('input[name="former_id"]').val(),window.eoxiaJS.loader.display(jQuery(this)),window.eoxiaJS.request.send(jQuery(this),e,function(i,e){a="Signature de l'utilisateur: "+t.element.data("result"),o.closest("tr").find(".wpeo-modal-event").attr("data-title",a),o.closest("tr").find(".wpeo-modal-event").removeClass("button-disable")})}},window.eoxiaJS.digirisk.causerie.saveSignatureURL=function(i){i.preventDefault(),jQuery(".modal-signature").find("canvas").each(function(){jQuery(this)[0].signaturePad.isEmpty()||(jQuery(this).closest("div").find("input:first").val(jQuery(this)[0].toDataURL()),jQuery('.step-1 .action-input[data-action="next_step_causerie"]').removeClass("button-disable"),jQuery(".step-4 a.button-disable").removeClass("button-disable"))})},window.eoxiaJS.digirisk.causerie.applySignature=function(i){return i.closest(".wpeo-modal").find("canvas")[0].signaturePad.isEmpty()||i.closest(".wpeo-modal").find('input[name="signature_data"]').val(i.closest(".wpeo-modal").find("canvas")[0].toDataURL()),!0},window.eoxiaJS.digirisk.causerie.beforeSaveCauserie=function(i){return window.eoxiaJS.tooltip.remove(i.closest(".causerie-row").find(".category-danger.wpeo-tooltip-event")),"-1"!==i.closest(".causerie-row").find('input[name="risk_category_id"]').val()||(window.eoxiaJS.tooltip.display(i.closest(".causerie-row").find(".category-danger.wpeo-tooltip-event")),!1)},window.eoxiaJS.digirisk.causerie.editedCauserieSuccess=function(i,e){i.closest(".tab-content").html(e.data.view)},window.eoxiaJS.digirisk.causerie.loadedCauserieSuccess=function(i,e){jQuery(i).closest("tr").replaceWith(e.data.view)},window.eoxiaJS.digirisk.causerie.deletedCauserieSuccess=function(i,e){i.closest("tr").fadeOut()},window.eoxiaJS.digirisk.causerie.nextStep=function(i,e){jQuery(".ajax-content").html(e.data.view);var t=e.data.current_step,a=0;a=2===t?37:3===t?62:4===t?100:0,jQuery(".main-content").hasClass("step-1")?jQuery(".main-content").removeClass("step-1").addClass("step-2"):jQuery(".main-content").hasClass("step-2")?jQuery(".main-content").removeClass("step-2").addClass("step-3"):jQuery(".main-content").hasClass("step-3")&&jQuery(".main-content").removeClass("step-3").addClass("step-4"),jQuery(".causerie-wrap .bar .loader").css("width",a+"%"),jQuery(".causerie-wrap .bar .loader").attr("data-width",a),jQuery('.causerie-wrap .step-list .step[data-width="'+a+'"]').addClass("active"),window.eoxiaJS.refresh()},window.eoxiaJS.digirisk.causerie.savedParticipant=function(i,e){jQuery(".ajax-content").html(e.data.view),window.eoxiaJS.digirisk.causerie.checkParticipantsSignature(),window.eoxiaJS.refresh()},window.eoxiaJS.digirisk.causerie.checkParticipantsSignature=function(){var i=!0;'.step-4 input[name="signature_data"]'.length&&jQuery('.step-4 input[name="signature_data"]').each(function(){if(!jQuery(this).val())return i=!1}),i?jQuery(".step-4 a.disabled").removeClass("disabled wpeo-tooltip-event"):jQuery(".step-4 a.disabled").addClass("disabled wpeo-tooltip-event")},window.eoxiaJS.digirisk.causerie.savedSignature=function(i,e){i.closest("tr").replaceWith(e.data.view),window.eoxiaJS.digirisk.causerie.checkParticipantsSignature(),window.eoxiaJS.digirisk.causerie.refresh()},window.eoxiaJS.digirisk.causerie.savedFormerSignature=function(i,e){i.closest("tr").find("td.signature").replaceWith(e.data.view),window.eoxiaJS.digirisk.causerie.refresh()},window.eoxiaJS.digirisk.causerie.checkAllData=function(i){return jQuery(".step-1 .former-tooltip").removeClass("active"),jQuery(".step-1 .signature-tooltip").removeClass("active"),jQuery('.step-1 input[name="former_id"]').val()?!jQuery('.step-1 input[name="signature_data"]').length||(jQuery(".step-1 .signature-tooltip").addClass("active"),!1):(jQuery(".step-1 .former-tooltip").addClass("active"),!1)},window.eoxiaJS.digirisk.causerie.checkUserID=function(i){return i.closest("tr").find(".user-tooltip").removeClass("active"),!!i.closest("tr").find('input[name="participant_id"]').val()||(i.closest("tr").find(".user-tooltip").addClass("active"),!1)},window.eoxiaJS.digirisk.causerie.addKeywordToTextarea=function(i){var e=jQuery(this).closest(".digi-import-causeries.modal-active").find("textarea");if("link"==jQuery(this).attr("data-type"))window.eoxiaJS.digirisk.causerie.buttonLinkExternalText(jQuery(this),e);else{var t="%"+jQuery(this).attr("data-type")+"% ";e.focus().val(e.val()+"\r\n"+t)}},window.eoxiaJS.digirisk.causerie.itemSelectToTextarea=function(i){var e=jQuery(this).attr("aria-label"),t=jQuery(this).closest(".digi-import-causeries.modal-active").find("textarea");t.val(t.val()+"\r\n%risque%"+e)},window.eoxiaJS.digirisk.causerie.buttonLinkExternalText=function(i,e){if("true"==i.closest(".digi-import-add-keyword").find(".tm-info-import-link input").attr("data-import")){var t={action:"get_text_from_url"};t.content=i.closest(".digi-import-add-keyword").find(".tm-info-import-link input").val(),window.eoxiaJS.loader.display(jQuery(".digi-import-add-keyword")),window.eoxiaJS.request.send(i,t)}else{if("no"==i.attr("data-link")){i.find(".tm_save_backup").val(e.val());var a="yes";i.removeClass("button-grey").addClass("button-green"),i.closest(".digi-import-add-keyword").find(".tm-info-import-link").show("200")}else{e.focus().val(i.find(".tm_save_backup").val());a="no";i.removeClass("button-green").addClass("button-grey"),i.closest(".digi-import-add-keyword").find(".tm-info-import-link").hide("200")}i.attr("data-link",a),i.find(".tm_link_external").val(a)}},window.eoxiaJS.digirisk.causerie.updateImportTextFromUrl=function(i){""!=jQuery(this).val().trim()?(jQuery(this).closest(".digi-import-add-keyword").find(".tm-icon-import-from-url").removeClass("fa-link").addClass("fa-file-import"),jQuery(this).attr("data-import","true")):(jQuery(this).closest(".digi-import-add-keyword").find(".tm-icon-import-from-url").removeClass("fa-file-import").addClass("fa-link"),jQuery(this).attr("data-import","false"))},window.eoxiaJS.digirisk.causerie.get_content_from_url_to_import_textarea=function(i,e){""==e.data.error&&i.closest(".tm-import-tasks.modal-active").find("textarea").val(e.data.content),i.closest(".digi-import-add-keyword").find(".tm-info-import-link input").val(""),i.removeClass("button-green").addClass("button-grey"),i.closest(".digi-import-add-keyword").find(".tm-info-import-link").hide("200"),i.attr("data-link","no"),i.find(".tm_link_external").val("no")},window.eoxiaJS.digirisk.causerie.deletedStartedCauserie=function(i,e){i.closest(".causerie-row").fadeOut()},window.eoxiaJS.digirisk.comment={},window.eoxiaJS.digirisk.comment.init=function(){window.eoxiaJS.digirisk.comment.event()},window.eoxiaJS.digirisk.comment.event=function(){},window.eoxiaJS.digirisk.comment.delete_success=function(i,e){jQuery(i).closest("li").fadeOut()},window.eoxiaJS.digirisk.comment.saved_comment_success=function(i,e){i.closest(".comment-container").replaceWith(e.data.view)},window.eoxiaJS.digirisk.correctiveTask={},window.eoxiaJS.digirisk.correctiveTask.init=function(){window.eoxiaJS.digirisk.correctiveTask.event()},window.eoxiaJS.digirisk.correctiveTask.event=function(){},window.eoxiaJS.digirisk.correctiveTask.listenAddSafeExit=function(i){""!==jQuery(this).val()?(jQuery(".popup.corrective-task").addClass("no-close"),jQuery(".popup.corrective-task .message").removeClass("hidden"),window.addEventListener("beforeunload",window.eoxiaJS.digirisk.correctiveTask.safeExit)):(jQuery(".popup.corrective-task").removeClass("no-close"),jQuery(".popup.corrective-task .message").addClass("hidden"),window.removeEventListener("beforeunload",window.eoxiaJS.digirisk.correctiveTask.safeExit))},window.eoxiaJS.digirisk.correctiveTask.addedPointSuccess=function(i){jQuery(".popup.corrective-task").removeClass("no-close"),jQuery(".popup.corrective-task .message").addClass("hidden"),window.removeEventListener("beforeunload",window.eoxiaJS.digirisk.correctiveTask.safeExit)},window.eoxiaJS.digirisk.correctiveTask.safeExit=function(i){var e="Vos données sont en attentes d'enregistrement";return i.returnValue=e},window.eoxiaJS.digirisk.correctiveTask.openedTaskPopup=function(i,e){jQuery(".popup.corrective-task .content").html(e.data.view),jQuery(".popup.corrective-task .container.loading").removeClass("loading")},window.eoxiaJS.digirisk.document={},window.eoxiaJS.digirisk.document.init=function(){window.eoxiaJS.digirisk.document.event()},window.eoxiaJS.digirisk.document.event=function(){jQuery(".wp-digi-societytree-right-container").on("click","#wpdigi-save-element-sheet",window.eoxiaJS.digirisk.document.save_element_sheet),jQuery(".wp-digi-societytree-right-container").on("click",".wp-digi-list-document .wp-digi-action-regenerate",window.eoxiaJS.digirisk.document.regenerate_document),jQuery(document).on("click",".wp-digi-doc-pagination a",window.eoxiaJS.digirisk.document.pagination)},window.eoxiaJS.digirisk.document.save_element_sheet=function(i){i.preventDefault(),jQuery(this).addClass("wp-digi-loading");var e={beforeSubmit:function(i,e,t){},success:function(i,e,t,a){jQuery(this).removeClass("wp-digi-loading"),i.success&&(void 0!==jQuery(".wp-digi-global-sheet-content ul.wp-digi-list-document").html()?jQuery(".wp-digi-global-sheet-content ul.wp-digi-list-document").prepend(i.data.output):jQuery(".wp-digi-global-sheet-tab li.wp-digi-sheet-generation-button").click())},dataType:"json",resetForm:!0};jQuery("#wpdigi-save-element-form").ajaxSubmit(e)},window.eoxiaJS.digirisk.document.regenerate_document=function(i){i.preventDefault();var e={action:"wpdigi_regenerate_document",element_id:jQuery(this).data("id"),parent_id:jQuery(this).data("parent-id"),model_name:jQuery(this).data("model"),_wpnonce:jQuery(this).data("nonce")};jQuery.post(window.ajaxurl,e,function(){})},window.eoxiaJS.digirisk.document.pagination=function(i){i.preventDefault();var e=jQuery(this).attr("href").split("&"),t=e[1].replace("current_page=",""),a={action:"paginate_document",element_id:e[2].replace("element_id=",""),next_page:t};jQuery.post(window.ajaxurl,a,function(i){jQuery(".doc-content").replaceWith(i)})},window.eoxiaJS.digirisk.diffusionInformations={},window.eoxiaJS.digirisk.diffusionInformations.init=function(){},window.eoxiaJS.digirisk.diffusionInformations.generatedDiffusionInformationSuccess=function(i,e){jQuery('.tab-list .tab-element[data-target="digi-diffusion-informations"]').click()},window.eoxiaJS.digirisk.DUER={},window.eoxiaJS.digirisk.DUER.init=function(){window.eoxiaJS.digirisk.DUER.event()},window.eoxiaJS.digirisk.DUER.event=function(){jQuery(document).on("modal-opened",".duer-modal",window.eoxiaJS.digirisk.DUER.modalOpened),jQuery(document).on("click",".duer-modal .button-main",window.eoxiaJS.digirisk.DUER.applyValueToTextarea),jQuery(document).on("modal-opened",".generate-duer-modal",window.eoxiaJS.digirisk.DUER.generateDUERModalOpened),jQuery(document).on("click",".generate-duer-modal .button-main",window.eoxiaJS.digirisk.DUER.closeModalGenerateDUER)},window.eoxiaJS.digirisk.DUER.modalOpened=function(i,e){if(jQuery(this).find(".modal-content").html(""),"view"!==jQuery(e).data("type")){var t=jQuery(e).closest("tr").find(".textarea-content-"+jQuery(e).data("src")).val();jQuery(this).find(".modal-content").html('<textarea data-to="'+jQuery(e).data("src")+'" rows="8" style="width: 100%; display: inline-block;"></textarea>'),jQuery(".duer-modal").find("textarea").val(t)}else{var a=jQuery(e).closest("tr").find(".text-content-"+jQuery(e).data("src")).html();jQuery(this).find(".modal-content").html("<p></p>"),jQuery(".duer-modal").find("p").html(a)}},window.eoxiaJS.digirisk.DUER.viewInPopup=function(i){return!0},window.eoxiaJS.digirisk.DUER.applyValueToTextarea=function(i){var e=jQuery(".duer-modal").find("textarea");jQuery(".table.duer tfoot .textarea-content-"+e.attr("data-to")).val(e.val())},window.eoxiaJS.digirisk.DUER.generateDUERModalOpened=function(i,e){window.eoxiaJS.digirisk.DUER.generateDUER(jQuery(e),{data:{index:1}})},window.eoxiaJS.digirisk.DUER.generateDUER=function(e,i){var t,a={},o=0,n=window.eoxiaJS.arrayForm.getInput(e.closest("tr"));for(o=0;o<n.length;o++)n[o].name&&(a[n[o].name]=window.eoxiaJS.arrayForm.getInputValue(n[o]));for(t in i.data)a[t]=i.data[t];jQuery(".generate-duer-modal li:nth-child("+i.data.index+")").get_data(function(i){for(t in i)a[t]=i[t];window.eoxiaJS.request.send(e,a)})},window.eoxiaJS.digirisk.DUER.generatedDUERSuccess=function(i,e){jQuery(".generate-duer-modal li:nth-child("+e.data.index+")").find("img").remove(),jQuery(".generate-duer-modal li:nth-child("+e.data.index+")").append('<span class="dashicons dashicons-yes"></span>'),e.data.end?jQuery(".generate-duer-modal").removeClass("no-close modal-force-display"):(e.data.index++,window.eoxiaJS.digirisk.DUER.generateDUER(i,e))},window.eoxiaJS.digirisk.DUER.callback_generate_duer_error=function(){},window.eoxiaJS.digirisk.DUER.closeModalGenerateDUER=function(i,e){jQuery('.digirisk-wrap .tab-element[data-target="digi-list-duer"]')&&jQuery('.digirisk-wrap .tab-element[data-target="digi-list-duer"]').click()},window.eoxiaJS.digirisk.evaluator={},window.eoxiaJS.digirisk.evaluator.init=function(){window.eoxiaJS.digirisk.evaluator.event()},window.eoxiaJS.digirisk.evaluator.event=function(){jQuery(document).on("click",'.digirisk-wrap table.evaluators input[type="checkbox"]',window.eoxiaJS.digirisk.evaluator.setTime),jQuery(document).on("click",".form-edit-evaluator-assign .wp-digi-pagination a",window.eoxiaJS.digirisk.evaluator.pagination)},window.eoxiaJS.digirisk.evaluator.tabChanged=function(){},window.eoxiaJS.digirisk.evaluator.setTime=function(i){var e=jQuery(this);e.is(":checked")?e.closest("tr").find("input.affect").val(jQuery('.table.evaluators input[type="text"]').val()):e.closest("tr").find("input.affect").val("")},window.eoxiaJS.digirisk.evaluator.callback_edit_evaluator_assign_success=function(i,e){jQuery("table.affected-evaluator").replaceWith(e.data.template),window.eoxiaJS.digirisk.search.renderChanged(),jQuery('.form-edit-evaluator-assign input[type="checkbox"]').attr("checked",!1),jQuery(".form-edit-evaluator-assign .affect:not(:first)").val("")},window.eoxiaJS.digirisk.evaluator.callback_detach_evaluator_success=function(i,e){jQuery("table.affected-evaluator").replaceWith(e.data.template),window.eoxiaJS.digirisk.search.renderChanged()},window.eoxiaJS.digirisk.evaluator.pagination=function(i){var e=jQuery(this).attr("href").split("&"),t=e[1].replace("current_page=",""),a=e[2].replace("element_id=","");window.eoxiaJS.loader.display(jQuery(".tab-content .form-edit-evaluator-assign"));var o={action:"paginate_evaluator",element_id:a,next_page:t};i.preventDefault(),jQuery.post(window.ajaxurl,o,function(i){jQuery(".tab-content .wpeo-gridlayout").replaceWith(i),window.eoxiaJS.digirisk.search.renderChanged()})},window.eoxiaJS.digirisk.evaluationMethod={},window.eoxiaJS.digirisk.evaluationMethod.init=function(){window.eoxiaJS.digirisk.evaluationMethod.event()},window.eoxiaJS.digirisk.evaluationMethod.event=function(){},window.eoxiaJS.digirisk.evaluationMethod.updateInputVariables=function(i,e,t,a,o){var n=!1;o||(n=!0,o=jQuery('.risk-row.edit[data-id="'+i+'"] textarea[name="evaluation_variables"]'));var d=JSON.parse(o.val());d[t]=a,o.val(JSON.stringify(d)),n&&jQuery('.risk-row.edit[data-id="'+i+'"] input[name="evaluation_method_id"]').val(e),"-1"!==jQuery('.risk-row.edit[data-id="'+i+'"]').find('input[name="risk_category_id"]').val()&&jQuery('.risk-row.edit[data-id="'+i+'"]').find(".action .wpeo-button.button-disable").removeClass("button-disable")},window.eoxiaJS.digirisk.evaluationMethodDropdown={},window.eoxiaJS.digirisk.evaluationMethodDropdown.init=function(){window.eoxiaJS.digirisk.evaluationMethodDropdown.event()},window.eoxiaJS.digirisk.evaluationMethodDropdown.event=function(){jQuery(document).on("click",".table.risk .dropdown-list li.dropdown-item:not(.open-popup)",window.eoxiaJS.digirisk.evaluationMethodDropdown.selectSeuil)},window.eoxiaJS.digirisk.evaluationMethodDropdown.selectSeuil=function(i){var e=jQuery(this),t=e.data("id"),a=e.data("seuil"),o=e.data("variable-id"),n=e.data("evaluation-id");jQuery('.risk-row.edit[data-id="'+t+'"] .cotation-container .dropdown-toggle.cotation span').text(jQuery(this).text()),jQuery('.risk-row.edit[data-id="'+t+'"] .cotation-container .dropdown-toggle.cotation').attr("data-scale",a),o&&n&&a&&window.eoxiaJS.digirisk.evaluationMethod.updateInputVariables(t,n,o,a)},window.eoxiaJS.digirisk.evaluationMethodEvarisk={},window.eoxiaJS.digirisk.evaluationMethodEvarisk.init=function(){window.eoxiaJS.digirisk.evaluationMethodEvarisk.event()},window.eoxiaJS.digirisk.evaluationMethodEvarisk.event=function(){jQuery(document).on("click",".wpeo-modal.evaluation-method .wpeo-table.evaluation-method .table-cell.can-select",window.eoxiaJS.digirisk.evaluationMethodEvarisk.selectSeuil),jQuery(document).on("click",".wpeo-modal.evaluation-method .wpeo-button.button-main",window.eoxiaJS.digirisk.evaluationMethodEvarisk.save),jQuery(document).on("click",".wpeo-modal.evaluation-method .wpeo-button.button-secondary",window.eoxiaJS.digirisk.evaluationMethodEvarisk.close_modal)},window.eoxiaJS.digirisk.evaluationMethodEvarisk.selectSeuil=function(i){jQuery(this).closest(".table-row").find(".active").removeClass("active"),jQuery(this).addClass("active");var e=jQuery(this),t=e.data("id"),a=e.data("seuil"),o=e.data("variable-id"),n=e.data("evaluation-id");window.eoxiaJS.digirisk.evaluationMethod.updateInputVariables(t,n,o,a,jQuery(".wpeo-modal.modal-active.modal-risk-"+t+" textarea"));var d={action:"get_scale",method_evaluation_id:n,variables:jQuery(".wpeo-modal.modal-risk-"+t+" textarea").val()},r=JSON.parse(jQuery(".wpeo-modal.modal-risk-"+t+" textarea").val());for(var s in r)""==r[s]&&!1;5==jQuery(".wpeo-modal.modal-active.modal-risk-"+t+" .table-cell.active").length&&(jQuery(".wpeo-modal.modal-active.modal-risk-"+t+" .button-main").length&&(window.eoxiaJS.loader.display(jQuery(".wpeo-modal.modal-active.modal-risk-"+t+" .button-main")),jQuery(".wpeo-modal.modal-active.modal-risk-"+t+" .button-main").addClass("disabled")),jQuery.post(window.ajaxurl,d,function(i){i.data.details&&(jQuery(".wpeo-modal.modal-active.modal-risk-"+t+" .button-main").length&&(window.eoxiaJS.loader.remove(jQuery(".wpeo-modal.modal-active.modal-risk-"+t+" .button-main")),jQuery(".wpeo-modal.modal-active.modal-risk-"+t+" .button-main").removeClass("disabled")),jQuery(".wpeo-modal.modal-active.modal-risk-"+t+" .cotation").attr("data-scale",i.data.details.scale),jQuery(".wpeo-modal.modal-active.modal-risk-"+t+" .cotation span").text(i.data.details.equivalence),jQuery(".wpeo-modal.modal-active.modal-risk-"+t+" .wpeo-button.button-disable").removeClass("button-disable").addClass("button-main"))}))},window.eoxiaJS.digirisk.evaluationMethodEvarisk.save=function(i){var e=jQuery(this).data("id"),t=jQuery(".wpeo-modal.modal-active.modal-risk-"+e+" .digi-method-evaluation-id").val(),a=jQuery(".wpeo-modal.modal-active.modal-risk-"+e+" textarea").val();jQuery('.risk-row.edit[data-id="'+e+'"] textarea[name="evaluation_variables"]').val(a),jQuery('.risk-row.edit[data-id="'+e+'"] input[name="evaluation_method_id"]').val(t),jQuery('.risk-row.edit[data-id="'+e+'"] .cotation:first').attr("data-scale",jQuery(".wpeo-modal.modal-risk-"+e+" .cotation").attr("data-scale")),jQuery('.risk-row.edit[data-id="'+e+'"] .cotation:first span').text(jQuery(".wpeo-modal.modal-risk-"+e+" .cotation span").text()),window.eoxiaJS.digirisk.evaluationMethodEvarisk.close_modal(void 0,e)},window.eoxiaJS.digirisk.evaluationMethodEvarisk.close_modal=function(i,e){e=e||jQuery(this).data("id"),jQuery(".wpeo-modal.modal-active .modal-close").click()},window.eoxiaJS.digirisk.evaluationMethodEvarisk.fillVariables=function(i){i.attr("data-variables",i.closest("td").find('textarea[name="evaluation_variables"]').val())},window.eoxiaJS.digirisk.handleModel={},window.eoxiaJS.digirisk.handleModel.currentButton,window.eoxiaJS.digirisk.handleModel.mediaFrame,window.eoxiaJS.digirisk.handleModel.selectedInfos={JSON:void 0,fileID:void 0},window.eoxiaJS.digirisk.handleModel.init=function(){window.eoxiaJS.digirisk.handleModel.event()},window.eoxiaJS.digirisk.handleModel.event=function(){jQuery(document).on("click",".digi-tools-main-container .upload-model",window.eoxiaJS.digirisk.handleModel.openMediaFrame)},window.eoxiaJS.digirisk.handleModel.openMediaFrame=function(){window.eoxiaJS.digirisk.handleModel.currentButton=jQuery(this),window.eoxiaJS.digirisk.handleModel.mediaFrame=new window.wp.media.view.MediaFrame.Post({library:{type:"application/vnd.oasis.opendocument.text"}}).open(),window.eoxiaJS.digirisk.handleModel.mediaFrame.on("insert",function(){window.eoxiaJS.digirisk.handleModel.selectedFile()})},window.eoxiaJS.digirisk.handleModel.selectedFile=function(){window.eoxiaJS.digirisk.handleModel.mediaFrame.state().get("selection").map(function(i){window.eoxiaJS.digirisk.handleModel.selectedInfos.JSON=i.toJSON(),window.eoxiaJS.digirisk.handleModel.selectedInfos.id=i.id}),window.eoxiaJS.digirisk.handleModel.associateFile()},window.eoxiaJS.digirisk.handleModel.associateFile=function(){var i={action:"set_model",type:window.eoxiaJS.digirisk.handleModel.currentButton.data("type"),file_id:window.eoxiaJS.digirisk.handleModel.selectedInfos.id};window.eoxiaJS.loader.display(window.eoxiaJS.digirisk.handleModel.currentButton),jQuery.post(window.ajaxurl,i,function(i){i.data.dashboard?window.eoxiaJS.digirisk.handleModel.currentButton.closest(".digi-tools-main-container").html(i.data.view):jQuery("#digi-handle-model").html(i.data.view)})},window.eoxiaJS.digirisk.handleModel.loadedPopupHistoric=function(i,e){i.closest(".block").find(".popup .title").text(e.data.title),i.closest(".block").find(".popup .content").html(e.data.view),jQuery(".container.loading").removeClass("loading")},window.eoxiaJS.digirisk.handleModel.reset_default_model_success=function(i,e){i.closest(".block").find("li:first a").attr("href",e.data.url)},window.eoxiaJS.digirisk.group={},window.eoxiaJS.digirisk.group.init=function(){},window.eoxiaJS.digirisk.group.createdGroupSuccess=function(i,e){jQuery(".digirisk-wrap").replaceWith(e.data.template),jQuery('.workunit-navigation span.action-attribute[data-groupment-id="'+e.data.groupment_id+'"]').click()},window.eoxiaJS.digirisk.exportCSV={},window.eoxiaJS.digirisk.exportCSV.init=function(){window.eoxiaJS.digirisk.exportCSV.event()},window.eoxiaJS.digirisk.exportCSV.event=function(){jQuery(document).on("click","#digi-export-csv-form button.blue",window.eoxiaJS.digirisk.exportCSV.makeExport)},window.eoxiaJS.digirisk.exportCSV.makeExport=function(i){var e=jQuery(this);i.preventDefault(),jQuery(this).closest("form").ajaxSubmit({beforeSubmit:function(){window.eoxiaJS.loader.display(e)},success:function(i){i.data.end?(e.closest("form").find("progress").attr("max",100),e.closest("form").find("progress").val(100),window.eoxiaJS.loader.remove(e),window.eoxiaJS.global.downloadFile(i.data.url_to_file,i.data.filename),jQuery('#digi-export-csv-form input[name="offset"]').val(0),jQuery('#digi-export-csv-form input[name="filepath"]').val(""),jQuery('#digi-export-csv-form input[name="filename"]').val(""),jQuery('#digi-export-csv-form input[name="number_risks"]').val(0),jQuery('#digi-export-csv-form input[name="url_to_file"]').val("")):(e.closest("form").find("progress").attr("max",i.data.number_risks),e.closest("form").find("progress").val(i.data.offset/i.data.number_risks*i.data.number_risks),jQuery('#digi-export-csv-form input[name="offset"]').val(i.data.offset),jQuery('#digi-export-csv-form input[name="filepath"]').val(i.data.filepath),jQuery('#digi-export-csv-form input[name="filename"]').val(i.data.filename),jQuery('#digi-export-csv-form input[name="number_risks"]').val(i.data.number_risks),jQuery('#digi-export-csv-form input[name="url_to_file"]').val(i.data.url_to_file),jQuery("#digi-export-csv-form button.blue").click())}})},window.eoxiaJS.digirisk.export={},window.eoxiaJS.digirisk.export.init=function(){window.eoxiaJS.digirisk.export.event()},window.eoxiaJS.digirisk.export.event=function(){jQuery(document).on("submit","#digi-data-export #digi-export-form",window.eoxiaJS.digirisk.export.create_export),jQuery(document).on("change",'#digi-data-export #digi-import-form input[type="file"]',window.eoxiaJS.digirisk.export.make_import)},window.eoxiaJS.digirisk.export.create_export=function(i){var e=jQuery(this);i.preventDefault(),jQuery(this).closest("form").ajaxSubmit({beforeSubmit:function(){window.eoxiaJS.loader.display(e.find("button"))},success:function(i){window.eoxiaJS.loader.remove(e.find("button")),window.eoxiaJS.global.downloadFile(i.data.url_to_file,i.data.filename)}})},window.eoxiaJS.digirisk.export.make_import=function(i){var e=new FormData;i.preventDefault(),e.append("file",jQuery(this)[0].files[0]),e.append("action","digi_import_data"),e.append("_wpnonce",jQuery(this).closest("form").find('input[name="_wpnonce"]').val()),e.append("index_element",0),window.eoxiaJS.digirisk.export.request_import(e)},window.eoxiaJS.digirisk.export.request_import=function(i){jQuery.ajax({url:ajaxurl,data:i,processData:!1,contentType:!1,type:"POST",beforeSend:function(){window.eoxiaJS.loader.display(jQuery("#digi-import-form .button.blue")),jQuery(".digi-import-detail").html(window.digi_tools_in_progress)},success:function(i){var e=new FormData;i.success?(jQuery("#digi-import-form progress").attr("max",i.data.count_element),jQuery("#digi-import-form progress").val(i.data.index_element/i.data.count_element*i.data.count_element),i.data.end?(jQuery(".digi-import-detail").html(window.digi_tools_done),jQuery("#toplevel_page_digi-setup a").attr("href")&&jQuery("#toplevel_page_digi-setup a").attr("href",jQuery("#toplevel_page_digi-setup a").attr("href").replace("digi-setup","digirisk-simple-risk-evaluation")),jQuery("#digi-import-form progress").attr("max",100),jQuery("#digi-import-form progress").val(100),window.eoxiaJS.loader.remove(jQuery("#digi-import-form .button.blue"))):(e.append("action","digi_import_data"),e.append("_wpnonce",jQuery("#digi-import-form").find('input[name="_wpnonce"]').val()),e.append("path_to_json",i.data.path_to_json),e.append("index_element",i.data.index_element),jQuery(".digi-import-detail").html(window.digi_tools_in_progress),window.eoxiaJS.digirisk.export.request_import(e))):alert("Problème lors de l'importation du modèle")}})},window.eoxiaJS.digirisk.historic={},window.eoxiaJS.digirisk.historic.init=function(){window.eoxiaJS.digirisk.historic.event()},window.eoxiaJS.digirisk.historic.event=function(){},window.eoxiaJS.digirisk.historic.openedHistoricRiskPopup=function(i,e){jQuery(".popup.historic-risk .content").html(e.data.view),jQuery(".popup.historic-risk .container.loading").removeClass("loading")},window.eoxiaJS.digirisk.legalDisplay={},window.eoxiaJS.digirisk.legalDisplay.init=function(){},window.eoxiaJS.digirisk.legalDisplay.generatedSuccess=function(i,e){jQuery(".table.documents").replaceWith(e.data.view),window.scrollTo(0,0)},window.eoxiaJS.digirisk.installer={},window.eoxiaJS.digirisk.installer.progressInterval=void 0,window.eoxiaJS.digirisk.installer.init=function(){window.eoxiaJS.digirisk.installer.event(),window.eoxiaJS.digirisk.initOwlCarousel()},window.eoxiaJS.digirisk.installer.event=function(){jQuery(document).on("keyup",'.wpdigi-installer input[name="title"]',window.eoxiaJS.digirisk.installer.keyUpGroupmentTitle),jQuery(document).on("click",'.wpdigi-installer input[type="checkbox"]',window.eoxiaJS.digirisk.installer.toggleDefaultInstall),jQuery(document).on("click",'.wpdigi-installer input[name="title"]',window.eoxiaJS.digirisk.installer.emptyPlaceHolder),jQuery(document).on("blur",'.wpdigi-installer input[name="title"]',window.eoxiaJS.digirisk.installer.fillProgressBar)},window.eoxiaJS.digirisk.initOwlCarousel=function(){jQuery(".owl-carousel").owlCarousel({items:1,nav:!0,navText:[],pagination:!0,autoHeight:!0,autoplay:!0,autoplayTimeout:25e3})},window.eoxiaJS.digirisk.installer.keyUpGroupmentTitle=function(i){13===i.keyCode&&jQuery(".main-content .action-input:first").click(),""!=jQuery(this).val()?(jQuery(".wpdigi-installer .bar .loader").css("width","12%"),jQuery(".wpdigi-installer .bar .loader").attr("data-width",12)):(jQuery(".wpdigi-installer .bar .loader").css("width","0%"),jQuery(".wpdigi-installer .bar .loader").attr("data-width",0))},window.eoxiaJS.digirisk.installer.toggleDefaultInstall=function(i){jQuery(".wpdigi-installer .bloc-create-society .default-data-details").toggleClass("hidden")},window.eoxiaJS.digirisk.installer.emptyPlaceHolder=function(i){""===jQuery(this).val()&&jQuery(this).closest(".society-form").find("label").hide()},window.eoxiaJS.digirisk.installer.fillProgressBar=function(i){""===jQuery(this).val()&&(jQuery(this).closest(".society-form").find("label").show(),jQuery(".wpdigi-installer .bar .loader").css("width","0%"),jQuery(".wpdigi-installer .bar .loader").attr("data-width",0))},window.eoxiaJS.digirisk.installer.beforeCreateSociety=function(i){return""===i.closest("form").find('input[name="title"]').val()?(i.closest("form").find("span.tooltip").addClass("active"),!1):(i.closest("form").find("span.tooltip.active").removeClass("active"),!0)},window.eoxiaJS.digirisk.installer.savedSociety=function(i,e){jQuery(".wpdigi-installer .bloc-create-society").hide(),jQuery(".wpdigi-installer .wpdigi-components").show(),jQuery(".wpdigi-installer .start-install").hide(),jQuery(".wpdigi-installer .end-install").show(),jQuery(".wpdigi-installer .bar .loader").css("width","30%"),jQuery(".wpdigi-installer .bar .loader").attr("data-width",25),jQuery('.wpdigi-installer .step-list .step[data-width="25"]').addClass("active"),window.eoxiaJS.loader.display(jQuery(".wpdigi-installer a.end-install")),window.eoxiaJS.digirisk.installer.requestInstallComponent()},window.eoxiaJS.digirisk.installer.requestInstallComponent=function(){var i=jQuery(".wpdigi-installer .wpdigi-components .nonce-installer-components").val();window.eoxiaJS.request.get(void 0,ajaxurl+"?action=installer_components&_wpnonce="+i)},window.eoxiaJS.digirisk.installer.installedComponentSuccess=function(i,e){e.data.core_option.installed?(window.eoxiaJS.digirisk.installer.progressBar(100),jQuery(".wpdigi-installer .wpdigi-components .next").removeClass("button-disable"),0<jQuery("#toplevel_page_digi-setup a").length&&jQuery("#toplevel_page_digi-setup a").attr("href",jQuery("#toplevel_page_digi-setup a").attr("href").replace("digi-setup","digirisk-simple-risk-evaluation")),window.eoxiaJS.loader.remove(jQuery(".wpdigi-installer a"))):(!e.data.core_option.recommendation_installed&&e.data.core_option.danger_installed?window.eoxiaJS.digirisk.installer.progressBar(55):e.data.core_option.recommendation_installed&&window.eoxiaJS.digirisk.installer.progressBar(80),window.eoxiaJS.digirisk.installer.requestInstallComponent())},window.eoxiaJS.digirisk.installer.progressBar=function(e){clearInterval(window.eoxiaJS.digirisk.installer.progressInterval),window.eoxiaJS.digirisk.installer.progressInterval=void 0,window.eoxiaJS.digirisk.installer.progressInterval=setInterval(function(){var i=jQuery(".wpdigi-installer .bar .loader").attr("data-width");i++,jQuery(".wpdigi-installer .bar .loader").css("width",i+"%"),jQuery(".wpdigi-installer .bar .loader").attr("data-width",i),jQuery('.wpdigi-installer .step-list .step[data-width="'+i+'"]').addClass("active"),jQuery(".wpdigi-installer .bar .loader").attr("data-width")>=e&&(clearInterval(window.eoxiaJS.digirisk.installer.progressInterval),window.eoxiaJS.digirisk.installer.progressInterval=void 0,100===e&&jQuery(".wpdigi-installer .end-install.button-disable").removeClass("button-disable"))},100)},window.eoxiaJS.digirisk.navigation={},window.eoxiaJS.digirisk.navigation.init=function(){window.eoxiaJS.digirisk.navigation.event()},window.eoxiaJS.digirisk.navigation.event=function(){jQuery(document).on("click",".digirisk-wrap .navigation-container .unit-container .toggle-unit",window.eoxiaJS.digirisk.navigation.switchToggle),jQuery(document).on("click",".digirisk-wrap .navigation-container .add-container .wpeo-button, .digirisk-wrap .navigation-container .mobile-add-container .dropdown-item",window.eoxiaJS.digirisk.navigation.displayAddField),jQuery(document).on("click",".digirisk-wrap .navigation-container .toolbar div",window.eoxiaJS.digirisk.navigation.toggleAll),jQuery(document).on("click",".digirisk-wrap .navigation-container .unit.new .placeholder-icon",window.eoxiaJS.digirisk.navigation.focusField),jQuery(document).on("keyup",'.digirisk-wrap .navigation-container input[name="title"]',window.eoxiaJS.digirisk.navigation.triggerCreateSociety),jQuery(document).on("click",".digirisk-wrap .mobile-navigation",window.eoxiaJS.digirisk.navigation.openNavigationContainer),jQuery(document).on("click",".digirisk-wrap .navigation-container.active .close-popup",window.eoxiaJS.digirisk.navigation.closeNavigationContainer)},window.eoxiaJS.digirisk.navigation.switchToggle=function(i){i.preventDefault(),jQuery(this).closest(".unit").toggleClass("toggled"),jQuery(this).closest(".unit").find(".unit.new:first.active ").removeClass("active")},window.eoxiaJS.digirisk.navigation.displayAddField=function(i){var e=jQuery(this).closest(".society-header").length?jQuery(this).closest(".navigation-container"):jQuery(this).closest(".unit");i.preventDefault(),i.stopPropagation(),jQuery(".mobile-add-container .content.active").removeClass("active"),e.addClass("toggled"),"Group_Class"===jQuery(this).data("type")?(e.find(".unit.new:first .placeholder-icon").removeClass("dashicons-admin-home"),e.find(".unit.new:first .placeholder-icon").addClass("dashicons-admin-multisite")):(e.find(".unit.new:first .placeholder-icon").removeClass("dashicons-admin-multisite"),e.find(".unit.new:first .placeholder-icon").addClass("dashicons-admin-home")),e.find(".unit.new:first").hasClass("active")&&e.find('.unit.new:first input[name="class"]').val()!=jQuery(this).data("type")||e.find(".unit.new:first").toggleClass("active"),e.find(".unit.new:first").hasClass("active")&&e.find('.unit.new:first.active input[type="text"]').focus(),e.find('.unit.new:first input[name="class"]').val(jQuery(this).data("type"))},window.eoxiaJS.digirisk.navigation.focusField=function(i){i.preventDefault(),jQuery(this).closest(".unit.new").find('input[type="text"]').focus()},window.eoxiaJS.digirisk.navigation.toggleAll=function(i){i.preventDefault(),jQuery(this).hasClass("toggle-plus")&&jQuery(".digirisk-wrap .navigation-container .workunit-list .unit").addClass("toggled"),jQuery(this).hasClass("toggle-minus")&&jQuery(".digirisk-wrap .navigation-container .workunit-list .unit.toggled").removeClass("toggled")},window.eoxiaJS.digirisk.navigation.setUnitActive=function(i){return jQuery(".digirisk-wrap .navigation-container .unit.active").removeClass("active"),jQuery(i).closest(".unit").addClass("active"),!0},window.eoxiaJS.digirisk.navigation.triggerCreateSociety=function(i){i.ctrlKey&&13===i.keyCode&&jQuery(this).closest(".unit.new").find(".action-input").click()},window.eoxiaJS.digirisk.navigation.openNavigationContainer=function(i){jQuery(".digirisk-wrap .navigation-container").addClass("active")},window.eoxiaJS.digirisk.navigation.closeNavigationContainer=function(i){i.stopPropagation(),jQuery(".digirisk-wrap .navigation-container").removeClass("active")},window.eoxiaJS.digirisk.navigation.createdSocietySuccess=function(i,e){jQuery(".workunit-list .unit.active").removeClass("active"),jQuery(i).closest(".unit:not(.new)").find(".spacer:first").removeClass("spacer").addClass("toggle-unit"),jQuery(i).closest(".sub-list").length?jQuery(i).closest(".sub-list").replaceWith(e.data.navigation_view):jQuery(i).closest(".workunit-list").replaceWith(e.data.navigation_view),jQuery(".digirisk-wrap .main-container").replaceWith(e.data.content_view),window.eoxiaJS.digirisk.risk.refresh()},window.eoxiaJS.digirisk.navigation.loadedSocietySuccess=function(i,e){jQuery(".digirisk-wrap .main-container").replaceWith(e.data.view),jQuery(".digirisk-wrap .navigation-container").removeClass("active"),window.eoxiaJS.digirisk.risk.refresh()},window.eoxiaJS.digirisk.listingRisk={},window.eoxiaJS.digirisk.listingRisk.init=function(){window.eoxiaJS.digirisk.listingRisk.event()},window.eoxiaJS.digirisk.listingRisk.event=function(){},window.eoxiaJS.digirisk.listingRisk.generatedListingRiskSuccess=function(i,e){"photos"===e.data.type?jQuery('.tab-element[data-target="digi-listing-risk-photo"]').click():jQuery('.tab-element[data-target="digi-listing-risk-action-corrective"]').click()},window.eoxiaJS.digirisk.pageSorter={},window.eoxiaJS.digirisk.pageSorter.init=function(){jQuery(document).on("click",".sorter-page .button.button-primary",function(i){window.removeEventListener("beforeunload",window.eoxiaJS.digirisk.pageSorter.safeExit)}),jQuery(".sorter-page").length&&(jQuery(".treetable").treetable({expandable:!0}),jQuery(".treetable").treetable("expandAll"),jQuery(".treetable .digi-workunit, .treetable .digi-group").draggable({helper:"clone",opacity:.75,refreshPositions:!0,revert:"invalid",revertDuration:300,scroll:!0}),jQuery(".treetable .digi-group, .digi-society").each(function(){jQuery(this).parents(".treetable tr").droppable({accept:".digi-workunit, .digi-group",drop:function(i,e){var t=e.draggable.parents("tr");if(t.data("ttId")==jQuery(this).data("ttParentId"))return i.preventDefault(),!1;window.addEventListener("beforeunload",window.eoxiaJS.digirisk.pageSorter.safeExit),jQuery('input[type="submit"]').attr("disabled",!1),jQuery('input[name="menu_item_parent_id['+t.data("ttId")+']"]').val(jQuery(this).data("ttId")),jQuery(".treetable").treetable("move",t.data("ttId"),jQuery(this).data("ttId"))},hoverClass:"accept",over:function(i,e){this==e.draggable.parents("tr")[0]||jQuery(this).is(".expanded")||jQuery(".treetable").treetable("expandNode",jQuery(this).data("ttId"))}})}))},window.eoxiaJS.digirisk.pageSorter.safeExit=function(i){var e="Vos données sont en attentes d'enregistrement";return i.returnValue=e},window.eoxiaJS.digirisk.recommendation={},window.eoxiaJS.digirisk.recommendation.init=function(){window.eoxiaJS.digirisk.recommendation.event()},window.eoxiaJS.digirisk.recommendation.event=function(){jQuery(document).on("click",".table.recommendation .categorie-container .item",window.eoxiaJS.digirisk.recommendation.selectRecommendation)},window.eoxiaJS.digirisk.recommendation.selectRecommendation=function(i){var e=jQuery(this);e.closest(".content").removeClass("active"),e.closest("tr").find('input[name="recommendation_category_id"]').val(e.data("id")),e.closest(".wpeo-dropdown").find(".dropdown-toggle span").hide(),e.closest(".wpeo-dropdown").find(".dropdown-toggle img").show(),e.closest(".wpeo-dropdown").find(".dropdown-toggle img").attr("src",e.find("img").attr("src")),e.closest(".wpeo-dropdown").find(".dropdown-toggle img").attr("srcset",""),e.closest(".wpeo-dropdown").find(".dropdown-toggle img").attr("sizes",""),e.closest(".wpeo-dropdown").find(".dropdown-toggle img").attr("aria-label",e.closest(".tooltip").attr("aria-label")),e.closest(".row").find(".categorie-container.tooltip").removeClass("active"),e.closest("tr").find(".action .wpeo-button.button-disable").removeClass("button-disable")},window.eoxiaJS.digirisk.recommendation.beforeSaveRecommendation=function(i){return i.closest(".recommendation-row").find(".categorie-container").removeClass("active"),"-1"!==i.closest(".recommendation-row").find('input[name="recommendation_category_id"]').val()||(i.closest(".recommendation-row").find(".categorie-container").addClass("active"),!1)},window.eoxiaJS.digirisk.recommendation.savedRecommendationSuccess=function(i,e){jQuery("table.recommendation").replaceWith(e.data.template),window.eoxiaJS.digirisk.date.init()},window.eoxiaJS.digirisk.recommendation.loadedRecommendationSuccess=function(i,e){jQuery(i).closest("tr").replaceWith(e.data.template),window.eoxiaJS.digirisk.date.init()},window.eoxiaJS.digirisk.recommendation.deletedRecommendationSuccess=function(i,e){jQuery(i).closest("tr").fadeOut()},window.eoxiaJS.digirisk.riskCategory={},window.eoxiaJS.digirisk.riskCategory.init=function(){window.eoxiaJS.digirisk.riskCategory.event()},window.eoxiaJS.digirisk.riskCategory.event=function(){jQuery(document).on("click",".table .category-danger .item, .wpeo-table .category-danger .item",window.eoxiaJS.digirisk.riskCategory.selectDanger)},window.eoxiaJS.digirisk.riskCategory.selectDanger=function(i){var e=jQuery(this),t={};e.closest(".content").removeClass("active"),e.closest("tr").find("input.input-hidden-danger").val(e.data("id")),e.closest(".wpeo-dropdown").find(".dropdown-toggle span").hide(),e.closest(".wpeo-dropdown").find(".dropdown-toggle img").show(),e.closest(".wpeo-dropdown").find(".dropdown-toggle img").attr("src",e.find("img").attr("src")),e.closest(".wpeo-dropdown").find(".dropdown-toggle img").attr("srcset",""),e.closest(".wpeo-dropdown").find(".dropdown-toggle img").attr("sizes",""),e.closest(".wpeo-dropdown").find(".dropdown-toggle img").attr("aria-label",e.closest(".tooltip").attr("aria-label")),window.eoxiaJS.tooltip.remove(e.closest(".risk-row").find(".category-danger.wpeo-tooltip-event")),"{}"!==e.closest(".risk-row").find('textarea[name="evaluation_variables"]').val()&&e.closest("tr").find(".action .wpeo-button.button-disable").removeClass("button-disable"),e.data("is-preset")&&!window.eoxiaJS.digirisk.riskCategory.haveDataInInput(e)&&(t.action="check_predefined_danger",t._wpnonce=e.closest(".wpeo-dropdown").data("nonce"),t.danger_id=e.data("id"),t.society_id=e.closest(".risk-row").find('input[name="parent_id"] ').val(),window.eoxiaJS.loader.display(jQuery(this).closest("table")),window.eoxiaJS.request.send(jQuery(this).closest(".wpeo-dropdown"),t))},window.eoxiaJS.digirisk.riskCategory.haveDataInInput=function(i){return"{}"!=i.closest(".risk-row").find('textarea[name="evaluation_variables"]').val()||""!=i.closest(".risk-row").find('textarea[name="list_comment[0][content]"]').val()};var digi_risk_comment={$:void 0,event:function(i){digi_risk_comment.$=i,digi_risk_comment.$(document).on("click",".wp-digi-action-comment-delete",function(i){digi_risk_comment.delete_comment(i,digi_risk_comment.$(this))})},delete_comment:function(i,e){if(window.confirm(window.digi_confirm_delete)){var t={action:"delete_comment",_wpnonce:digi_risk_comment.$(e).data("nonce"),risk_id:digi_risk_comment.$(e).data("risk-id"),id:digi_risk_comment.$(e).data("id")};digi_risk_comment.$(e).closest("li").remove(),digi_risk_comment.$.post(window.ajaxurl,t,function(){})}},reset_create_form:function(){digi_risk_comment.$(".wp-digi-risk-item-new .wp-digi-risk-comment textarea").val("")}};function get_treated_element(t){var i={action:"wpdigi-dtrans-get-done-element",element:t};jQuery.post(ajaxurl,i,function(i){var e;for(e=0;e<i.transfert.length;e++)jQuery("#digi-datas-transfert-progression-container-"+i.transfert[e].type).html(i.transfert[e].text);i.auto_reload&&setTimeout(function(){get_treated_element(t)},"500")},"json")}window.eoxiaJS.digirisk.risk_page={},window.eoxiaJS.digirisk.risk_page.init=function(){window.eoxiaJS.digirisk.risk_page.event()},window.eoxiaJS.digirisk.risk_page.refresh=function(){autosize(document.querySelectorAll("textarea"))},window.eoxiaJS.digirisk.risk_page.event=function(){jQuery(document).on("click",".risk-page .save-all:not(.grey)",window.eoxiaJS.digirisk.risk_page.saveRisks),jQuery(document).on("click",'.risk-page table tr input:not(input[type="checkbox"]), .risk-page tr .wpeo-dropdown .dropdown-toggle, .risk-page tr textarea, .risk-page tr .popup, .risk-page tr .action, .risk-page .cotation',window.eoxiaJS.digirisk.risk_page.checkTheCheckbox),jQuery(document).on("click",".risk-page .wp-digi-pagination a",window.eoxiaJS.digirisk.risk_page.pagination)},window.eoxiaJS.digirisk.risk_page.saveRisks=function(i){i&&i.preventDefault(),jQuery(".risk-page tr  .edit-risk.checked:first").click(),jQuery(".risk-page .save-all").addClass("button-disable")},window.eoxiaJS.digirisk.risk_page.checkTheCheckbox=function(i){jQuery(this).closest("tr").find('input[type="checkbox"]').prop("checked",!0),jQuery(this).closest("tr").find(".edit-risk").addClass("checked"),jQuery(".risk-page .save-all").removeClass("button-disable")},window.eoxiaJS.digirisk.risk_page.savedRiskSuccess=function(i,e){jQuery(i).closest("tr").replaceWith(e.data.template),window.eoxiaJS.digirisk.risk_page.saveRisks(void 0)},window.eoxiaJS.digirisk.risk_page.pagination=function(i){var e=jQuery(this).attr("href").split("&")[1].replace("current_page=","");jQuery(".risk-page").addClass("loading");var t={action:"paginate_risk",next_page:e};i.preventDefault(),jQuery.post(window.ajaxurl,t,function(i){jQuery(".risk-page").replaceWith(i),window.eoxiaJS.digirisk.risk_page.refresh()})},window.eoxiaJS.digirisk.risk={},window.eoxiaJS.digirisk.risk.init=function(){window.eoxiaJS.digirisk.risk.refresh(),window.eoxiaJS.digirisk.risk.event()},window.eoxiaJS.digirisk.risk.refresh=function(){autosize(document.querySelectorAll("textarea"))},window.eoxiaJS.digirisk.risk.event=function(){jQuery(document).on("dropdown-before-close",".risk-row .risk-options .dropdown-move-to .dropdown-item",window.eoxiaJS.digirisk.risk.beforeClose),jQuery(document).on("keyup",".dropdown-move-to input.form-field",window.eoxiaJS.digirisk.risk.searchMoveTo)},window.eoxiaJS.digirisk.risk.beforeClose=function(i,e,t,a){a.close=!1,t.closest(".wpeo-form").find('input[type="hidden"]').val(t.data("id")),t.closest(".wpeo-form").find('input[type="text"]').val(t.text().trim()),t.closest(".wpeo-dropdown").find(".dropdown-content").addClass("hidden")},window.eoxiaJS.digirisk.risk.searchMoveTo=function(i){jQuery(this).closest(".wpeo-dropdown").find(".dropdown-content").removeClass("hidden");var e=jQuery(this).closest(".wpeo-dropdown").find(".dropdown-content .dropdown-item");e.show();for(var t=jQuery(this).val().toLowerCase(),a=0;a<e.length;a++)-1==jQuery(e[a]).text().toLowerCase().indexOf(t)&&jQuery(e[a]).hide()},window.eoxiaJS.digirisk.risk.deletedRiskSuccess=function(i,e){i.closest("tr").fadeOut()},window.eoxiaJS.digirisk.risk.loadedRiskSuccess=function(i,e){i.closest("tr").replaceWith(e.data.template),window.eoxiaJS.digirisk.risk.refresh()},window.eoxiaJS.digirisk.risk.beforeSaveRisk=function(i){return window.eoxiaJS.tooltip.remove(i.closest(".risk-row").find(".category-danger.wpeo-tooltip-event")),window.eoxiaJS.tooltip.remove(i.closest(".risk-row").find(".cotation-container.wpeo-tooltip-event")),"-1"!==i.closest(".risk-row").find('input[name="risk_category_id"]').val()||jQuery("#digi-danger-preset").length?!("{}"===i.closest(".risk-row").find('textarea[name="evaluation_variables"]').val()&&!jQuery("#digi-danger-preset").length)||(window.eoxiaJS.tooltip.display(i.closest(".risk-row").find(".cotation-container.wpeo-tooltip-event")),!1):(window.eoxiaJS.tooltip.display(i.closest(".risk-row").find(".category-danger.wpeo-tooltip-event")),!1)},window.eoxiaJS.digirisk.risk.savedRiskSuccess=function(i,e){i.closest("table.risk").replaceWith(e.data.template)},window.eoxiaJS.digirisk.risk.checkedPredefinedDanger=function(i,e){i.closest("table").removeClass("loading"),i.closest(".risk-row").replaceWith(e.data.view)},window.eoxiaJS.digirisk.risk.movedRiskSuccess=function(i,e){i.closest(".risk-row").fadeOut()},window.eoxiaJS.digirisk.sheet_groupment={},window.eoxiaJS.digirisk.sheet_groupment.init=function(){},window.eoxiaJS.digirisk.sheet_groupment.generatedSheetGroupment=function(i,e){jQuery('.tab-element[data-target="digi-fiche-de-groupement"]').click()},jQuery(document).ready(function(){jQuery(document).unbind("keydown").bind("keydown",function(i){var e=!1;if(8===i.keyCode){var t=i.srcElement||i.target;e=("INPUT"!==t.tagName.toUpperCase()||"TEXT"!==t.type.toUpperCase()&&"PASSWORD"!==t.type.toUpperCase()&&"FILE"!==t.type.toUpperCase()&&"SEARCH"!==t.type.toUpperCase()&&"EMAIL"!==t.type.toUpperCase()&&"NUMBER"!==t.type.toUpperCase()&&"DATE"!==t.type.toUpperCase())&&"TEXTAREA"!==t.tagName.toUpperCase()&&!t.getAttribute("contenteditable")||(t.readOnly||t.disabled)}e&&i.preventDefault()})}),window.eoxiaJS.digirisk.societyAdvancedOptions={},window.eoxiaJS.digirisk.societyAdvancedOptions.init=function(){},window.eoxiaJS.digirisk.societyAdvancedOptions.savedAdvancedOptionsMoveTo=function(i,e){jQuery(".digirisk-wrap").replaceWith(e.data.view)},window.eoxiaJS.digirisk.society={},window.eoxiaJS.digirisk.society.init=function(){window.eoxiaJS.digirisk.society.event()},window.eoxiaJS.digirisk.society.event=function(){jQuery(document).on("keyup",'.main-header input[name="title"]',window.eoxiaJS.digirisk.society.keyUpSaveIdentity),jQuery(document).on("click",".main-header .edit",window.eoxiaJS.digirisk.society.focusInputTitle),jQuery(document).on("keyup",".digirisk-wrap .form.society-informations .form-element input, .digirisk-wrap .form.society-informations .form-element textarea",window.eoxiaJS.digirisk.society.enableSaveButton)},window.eoxiaJS.digirisk.society.keyUpSaveIdentity=function(i){jQuery(".digirisk-wrap .main-container .main-header .unit-header .edit").hide(),jQuery(".digirisk-wrap .main-container .main-header .unit-header .action-input.save").addClass("active"),13===i.keyCode&&jQuery(".digirisk-wrap .main-container .main-header .unit-header .action-input.save").click()},window.eoxiaJS.digirisk.society.focusInputTitle=function(i){jQuery(this).closest(".main-header").find('input[name="title"]').focus().select(),jQuery(this).hide(),jQuery(".digirisk-wrap .main-container .main-header .unit-header .action-input.save").addClass("active")},window.eoxiaJS.digirisk.society.enableSaveButton=function(i){jQuery(".digirisk-wrap .form.society-informations button.green").removeClass("disable")},window.eoxiaJS.digirisk.society.savedSocietySuccess=function(i,e){jQuery(".digirisk-wrap").replaceWith(e.data.template)},window.eoxiaJS.digirisk.society.deletedSocietySuccess=function(i,e){jQuery(".digirisk-wrap").replaceWith(e.data.template)},window.eoxiaJS.digirisk.society.savedSocietyConfigurationSuccess=function(i,e){"digi-group"===e.data.society.type?jQuery(".digirisk-wrap .workunit-navigation .title").text(e.data.society.data.unique_identifier+" - "+e.data.society.data.title):"digi-workunit"===e.data.society.type?(jQuery('.digirisk-wrap .workunit-list span[data-workunit-id="'+e.data.society.data.id+'"] span').text(e.data.society.data.title),jQuery('.digirisk-wrap .workunit-list span[data-workunit-id="'+e.data.society.data.id+'"] span').attr("title",e.data.society.data.title)):jQuery(".digirisk-wrap .navigation-container .society-header .title").text(e.data.society.data.title),jQuery('.digirisk-wrap .main-container .main-header input[name="title"]').val(e.data.society.data.title),jQuery(".digirisk-wrap .main-content").replaceWith(e.data.view)},window.eoxiaJS.digirisk.setting={},window.eoxiaJS.digirisk.setting.init=function(){window.eoxiaJS.digirisk.setting.event()},window.eoxiaJS.digirisk.setting.event=function(){jQuery(document).on("click","#digi-danger-preset .save-all",window.eoxiaJS.digirisk.setting.savePresetRisks),jQuery(document).on("click",'#digi-danger-preset table tr input:not(input[type="checkbox"]), #digi-danger-preset tr .toggle, #digi-danger-preset .dropdown-toggle, #digi-danger-preset tr textarea, #digi-danger-preset tr .popup, #digi-danger-preset tr .action',window.eoxiaJS.digirisk.setting.checkTheCheckbox),jQuery(document).on("click",".settings_page_digirisk-setting .list-users .wp-digi-pagination a",window.eoxiaJS.digirisk.setting.pagination),jQuery(document).on("click",'.section-capability input[type="checkbox"]',window.eoxiaJS.digirisk.setting.activeSave)},window.eoxiaJS.digirisk.setting.savePresetRisks=function(i){i&&i.preventDefault(),jQuery("#digi-danger-preset tr.risk-row.edit.checked .save.action-input").length&&(window.eoxiaJS.loader.display(jQuery("#digi-danger-preset .save-all")),jQuery("#digi-danger-preset tr.risk-row.edit.checked .save.action-input").click())},window.eoxiaJS.digirisk.setting.pagination=function(i){var e=jQuery(this).attr("href").split("&")[2].replace("current_page=","");jQuery(".list-users").addClass("loading");var t={action:"paginate_setting_page_user",next_page:e};i.preventDefault(),jQuery.post(window.ajaxurl,t,function(i){jQuery(".list-users").replaceWith(i),window.eoxiaJS.digirisk.search.renderChanged()})},window.eoxiaJS.digirisk.setting.checkTheCheckbox=function(i){jQuery(this).closest("tr.risk-row.edit").addClass("checked"),jQuery("#digi-danger-preset .save-all").removeClass("disable").addClass("green")},window.eoxiaJS.digirisk.setting.savedRiskSuccess=function(i,e){jQuery("#digi-danger-preset tr.risk-row.edit.checked .save.action-input").length<=1&&window.eoxiaJS.loader.remove(jQuery("#digi-danger-preset .save-all")),jQuery(i).closest("tr").replaceWith(e.data.template)},window.eoxiaJS.digirisk.setting.savedCapability=function(i,e){},window.eoxiaJS.digirisk.setting.generalSettingsSaved=function(i,e){document.location.href=e.data.url},window.eoxiaJS.digirisk.setting.activeSave=function(i){jQuery(this).closest(".section-capability").find(".wpeo-button.button-blue").removeClass("button-disable")},window.eoxiaJS.digirisk.tools={},window.eoxiaJS.digirisk.tools.init=function(){window.eoxiaJS.digirisk.tools.event()},window.eoxiaJS.digirisk.tools.event=function(){jQuery(document).on("click",".digi-tools-main-container .nav-tab",window.eoxiaJS.digirisk.tools.tab_switcher),jQuery(document).on("click",".reset-method-evaluation",window.eoxiaJS.digirisk.tools.reset_evaluation_method),jQuery(document).on("click",".element-risk-compilation",window.eoxiaJS.digirisk.tools.risk_fixer),jQuery(document).on("click",".fix-recommendation",window.eoxiaJS.digirisk.tools.recommendation_fixer),jQuery(document).on("click",".fix-doc",window.eoxiaJS.digirisk.tools.doc_fixer)},window.eoxiaJS.digirisk.tools.tab_switcher=function(i){i.preventDefault(),jQuery(this).closest("h2").children(".nav-tab").each(function(){jQuery(this).removeClass("nav-tab-active")}),jQuery(this).addClass("nav-tab-active"),jQuery(this).closest(".digi-tools-main-container").find(".tab-content").each(function(){jQuery(this).hide()}),jQuery("#"+jQuery(this).attr("data-id")).show()},window.eoxiaJS.digirisk.tools.reset_evaluation_method=function(i){if(i.preventDefault(),window.confirm(window.digi_tools_confirm)){jQuery(this).addClass("wp-digi-loading"),jQuery(this).closest("div").find("ul").html("");var e=document.createElement("li");e.innerHTML=window.digi_tools_in_progress,jQuery(this).closest("div").find("ul").append(e);var t={action:"reset_method_evaluation",_wpnonce:jQuery(this).data("nonce")};window.eoxiaJS.digirisk.tools.exec_request(e,t,this)}},window.eoxiaJS.digirisk.tools.risk_fixer=function(i){i.preventDefault(),jQuery(this).addClass("wp-digi-loading"),jQuery(this).closest("div").find("ul").html("");var e=document.createElement("li");e.innerHTML=window.digi_tools_in_progress,jQuery(this).closest("div").find("ul").append(e);var t={action:"compil_risk_list",_wpnonce:jQuery(this).data("nonce")};window.eoxiaJS.digirisk.tools.exec_request(e,t,this)},window.eoxiaJS.digirisk.tools.recommendation_fixer=function(i){i.preventDefault(),jQuery(this).addClass("wp-digi-loading"),jQuery(this).closest("div").find("ul").html("");var e=document.createElement("li");e.innerHTML=window.digi_tools_in_progress,jQuery(this).closest("div").find("ul").append(e);var t={action:"transfert_recommendation",_wpnonce:jQuery(this).data("nonce")};window.eoxiaJS.digirisk.tools.exec_request(e,t,this)},window.eoxiaJS.digirisk.tools.doc_fixer=function(i){i.preventDefault(),jQuery(this).addClass("wp-digi-loading"),jQuery(this).closest("div").find("ul").html("");var e=document.createElement("li");e.innerHTML=window.digi_tools_in_progress,jQuery(this).closest("div").find("ul").append(e);var t={action:"transfert_doc",_wpnonce:jQuery(this).data("nonce")};window.eoxiaJS.digirisk.tools.exec_request(e,t,this)},window.eoxiaJS.digirisk.tools.exec_request=function(i,e,t){jQuery.post(window.ajaxurl,e,function(){jQuery(t).removeClass("wp-digi-loading"),i.innerHTML+=" "+window.digi_tools_done})},window.eoxiaJS.digirisk.tools.fixedHiddenSociety=function(i,e){jQuery(i).closest(".tab-content").find("progress").val(100)},jQuery(document).ready(function(){jQuery("#wpdigi-datastransfer-form").ajaxForm({dataType:"json",beforeSubmit:function(i,e,t){e.children("button.wp-digi-bton").addClass("wp-digi-loading")},success:function(i,e,t,a){a.children("button.wp-digi-bton").removeClass("wp-digi-loading"),!i.status&&i.reload_transfert?("element"==i.sub_action?(jQuery(".wpdigi-transfered-element-nb-"+i.element_type).html(i.main_element_nb),i.main_element_nb==jQuery(".wpdigi-to-transfer-element-nb-"+i.element_type).html()&&jQuery(".wp-digi-datastransfer-element-type-name-"+i.element_type).addClass("dashicons-before dashicons-yes"),jQuery(".wpdigi-transfered-element-nb-"+i.sub_element_type).html(i.sub_element_nb),i.sub_element_nb==jQuery(".wpdigi-to-transfer-element-nb-"+i.sub_element_type).html()&&jQuery(".wp-digi-datastransfer-element-type-name-"+i.sub_element_type).addClass("dashicons-before dashicons-yes"),null!=i.treated_tree&&jQuery(".wpdigi-tree-check-"+i.element_type).html(i.treated_tree)):(jQuery(".wpdigi-transfered-element-nb-documents").html(i.transfered),jQuery(".wpdigi-not-transfered-element-nb-documents").html(i.not_transfered),i.transfered+i.not_transfered==jQuery(".wpdigi-to-transfer-element-nb-wpdigi-to-transfer-element-nb-documents").html()&&jQuery("wp-digi-datastransfer-element-type-name-documents").addClass("dashicons-before dashicons-yes")),"config_components"==i.old_sub_action&&(jQuery(".wp-digi-transfert-components").html(i.display_components_transfer),a.children("input[name=action]").val(a.children("input[name=action]").val().replace("-config_components",""))),a.children("input[name=element_type_to_transfert]").val(i.element_type),a.children("input[name=sub_action]").val(i.sub_action),a.submit()):i.status&&(jQuery("#wp-digi-transfert-message").html(i.message).show(),jQuery("#wpdigi-datastransfer-form .wp-digi-bton-first").hide(),setTimeout(function(){window.location.href=i.redirect_to_url},"1500"))}}),jQuery("input[name=wpdigi-dtrans-userid-behaviour]").click(function(){if(jQuery(this).is(":checked"))jQuery(".wp-digi-dtrans-userid-options-container").html("").hide();else{var i={action:"wpdigi-dtrans-transfert-options-load",element_type:jQuery(this).closest("form").children("input[name=element_type_to_transfert]").val()};jQuery(".wp-digi-dtrans-userid-options-container").load(ajaxurl,i).show()}})}),window.eoxiaJS.digirisk.sheet_workunit={},window.eoxiaJS.digirisk.sheet_workunit.init=function(){},window.eoxiaJS.digirisk.sheet_workunit.generatedFicheDePosteSuccess=function(){jQuery('.tab-element[data-target="digi-fiche-de-poste"]').click()};var digi_user_import={$:void 0,init:function(i,e){digi_user_import.$=e,!i&&void 0!==i||digi_user_import.event()},event:function(){digi_user_import.$(document).on("submit","#digi-data-import-user #digi-export-form",function(i){digi_user_import.create_export(i,digi_user_import.$(this))}),digi_user_import.$(document).on("change",'#digi-data-import-user #digi-import-form input[type="file"]',function(i){digi_user_import.make_import(i,digi_user_import.$(this))})},create_export:function(i,e){i.preventDefault(),digi_user_import.$(e).closest("form").ajaxSubmit({beforeSubmit:function(){digi_user_import.$(e).closest(".wp-digi-bloc-loader").addClass("wp-digi-bloc-loading")},success:function(i){digi_user_import.$(e).closest(".wp-digi-bloc-loader").removeClass("wp-digi-bloc-loading"),window.digi_global.download_file(i.data.url_to_file,i.data.filename)}})},make_import:function(i,e){i.preventDefault();var t=new FormData;t.append("file",digi_user_import.$(e)[0].files[0]),t.append("action","digi_import_user"),t.append("_wpnonce",digi_user_import.$(e).closest("form").find('input[name="_wpnonce"]').val()),t.append("index_element",0),digi_user_import.request_import(t)},request_import:function(i){digi_user_import.$.ajax({url:ajaxurl,data:i,processData:!1,contentType:!1,type:"POST",beforeSend:function(){digi_user_import.$(".digi-import-detail").html(window.digi_tools_in_progress)},success:function(i){if(i.success){if(i.data.end)digi_user_import.$(".digi-import-detail").html(window.digi_tools_done);else{var e=new FormData;e.append("action","digi_import_user"),e.append("_wpnonce",digi_user_import.$("#digi-data-import-user #digi-import-form").find('input[name="_wpnonce"]').val()),e.append("index_element",i.data.index_element),e.append("count_element",i.data.count_element),e.append("path_to_csv",i.data.path_to_csv),digi_user_import.$(".digi-import-detail").html(window.digi_tools_in_progress),digi_user_import.request_import(e)}digi_user_import.$("progress").attr("max",i.data.count_element),digi_user_import.$("progress").val(i.data.index_element/i.data.count_element*i.data.count_element)}else alert("Problème lors de l'importation du modèle"),digi_installer.$("#digi-data-export").removeClass("wp-digi-bloc-loading")}})}};jQuery(document).ready(function(i){digi_user_import.init(!0,i)}),window.eoxiaJS.digirisk.user={},window.eoxiaJS.digirisk.user.init=function(){window.eoxiaJS.digirisk.user.event()},window.eoxiaJS.digirisk.user.event=function(){jQuery(document).on("click",".form-edit-user-assign .wp-digi-pagination a",window.eoxiaJS.digirisk.user.pagination)},window.eoxiaJS.digirisk.user.editUserAssignSuccess=function(i,e){window.eoxiaJS.digirisk.user.render(e)},window.eoxiaJS.digirisk.user.detachUserSuccess=function(i,e){window.eoxiaJS.digirisk.user.render(e)},window.eoxiaJS.digirisk.user.render=function(i){jQuery("section.users").replaceWith(i.data.template),window.eoxiaJS.digirisk.render.call_render_changed()},window.eoxiaJS.digirisk.user.pagination=function(i){i.preventDefault();var e=jQuery(this).attr("href").split("&"),t=e[1].replace("current_page=",""),a={action:"paginate_user",element_id:e[2].replace("element_id=",""),next_page:t};jQuery(".form-edit-user-assign").addClass("loading"),jQuery.post(window.ajaxurl,a,function(i){jQuery(".form-edit-user-assign").replaceWith(i)})},window.eoxiaJS.digirisk.workunit={},window.eoxiaJS.digirisk.workunit.init=function(){window.eoxiaJS.digirisk.workunit.event()},window.eoxiaJS.digirisk.workunit.event=function(){jQuery(document).on("keyup",'.digirisk-wrap .workunit-add input[type="text"]',window.eoxiaJS.digirisk.workunit.keyEnterSendForm),jQuery(document).on("click",'.digirisk-wrap .workunit-list span[data-action="load_society"]',window.eoxiaJS.digirisk.workunit.setActive)},window.eoxiaJS.digirisk.workunit.keyEnterSendForm=function(i){13===i.keyCode&&jQuery(".digirisk-wrap .workunit-add .add").click()},window.eoxiaJS.digirisk.workunit.saved_workunit_success=function(i,e){jQuery(".digirisk-wrap").replaceWith(e.data.template),jQuery('.workunit-list .unit-header[data-workunit-id="'+e.data.id+'"] span[data-action="load_society"]').click()},window.eoxiaJS.digirisk.workunit.setActive=function(i){jQuery(".digirisk-wrap .workunit-list li.active").removeClass("active"),jQuery(this).closest("li").addClass("active")},window.eoxiaJS.digirisk.userDashboard={},window.eoxiaJS.digirisk.userDashboard.init=function(){window.eoxiaJS.digirisk.userDashboard.event()},window.eoxiaJS.digirisk.userDashboard.event=function(){jQuery(document).on("keyup",".user-dashboard .input-domain-mail",window.eoxiaJS.digirisk.userDashboard.keyupUpdateEmail),jQuery(document).on("keyup",".user-dashboard table.users tr:last input.lastname",window.eoxiaJS.digirisk.userDashboard.keyupUpdateEmail),jQuery(document).on("keyup",".user-dashboard table.users tr:last input.firstname",window.eoxiaJS.digirisk.userDashboard.keyupUpdateEmail),jQuery(document).on("keyup",".user-dashboard table.users tr input",window.eoxiaJS.digirisk.userDashboard.keyEnterSendForm),jQuery(document).on("keyup",".user-dashboard .input-domain-mail",window.eoxiaJS.digirisk.userDashboard.keyEnterSendFormDomainMail),jQuery(document).on("keyup",".user-dashboard table.users tr:last input.lastname",window.eoxiaJS.digirisk.userDashboard.changeColorInputSubmit),jQuery(document).on("keyup",".user-dashboard table.users tr:last input.firstname",window.eoxiaJS.digirisk.userDashboard.changeColorInputSubmit),jQuery(document).on("keyup",".user-dashboard table.users tr:last input.email",window.eoxiaJS.digirisk.userDashboard.changeColorInputSubmit),jQuery(document).on("click",".user-dashboard .wp-digi-action-save-domain-mail",window.eoxiaJS.digirisk.userDashboard.save_domain_mail)},window.eoxiaJS.digirisk.userDashboard.checkDomainEmailValid=function(i){return window.regex.validateEndEmail(i.closest(".email-domain").find('input[type="text"]').val())?(i.closest(".email-domain").find("label").removeClass("active"),!0):(i.closest(".email-domain").find("label").addClass("active"),!1)},window.eoxiaJS.digirisk.userDashboard.save_domain_mail=function(i){var e,t=jQuery(this);i.preventDefault(),e={action:"save_domain_mail",_wpnonce:t.data("nonce"),domain_mail:t.closest(".form-element").find("input").val()},jQuery.post(window.ajaxurl,e)},window.eoxiaJS.digirisk.userDashboard.keyupUpdateEmail=function(i){jQuery(".user-dashboard table.users tr:last .email").val();var e=jQuery(".user-dashboard table.users tr:last .firstname").val(),t=jQuery(".user-dashboard table.users tr:last .lastname").val(),a=jQuery(".input-domain-mail").val(),o=window.eoxiaJS.global.removeDiacritics(e+"."+t+"@"+a).toLowerCase();jQuery('.user-dashboard table.users tr:last input[name="email"]').val(o),"input-domain-mail"!==i.target.className&&window.eoxiaJS.digirisk.userDashboard.keyEnterSendForm(i,jQuery(this))},window.eoxiaJS.digirisk.userDashboard.keyEnterSendForm=function(i){if(13===i.keyCode)return jQuery(this).closest(".user-row").find(".action-input").click(),i.preventDefault(),!1},window.eoxiaJS.digirisk.userDashboard.keyEnterSendFormDomainMail=function(i){if(13===i.keyCode)return jQuery(this).closest(".form").find(".action-input").click(),i.preventDefault(),!1},window.eoxiaJS.digirisk.userDashboard.changeColorInputSubmit=function(i){var e=jQuery(this).closest("tr");e.find('input[name="firstname"]').val()&&e.find('input[name="lastname"]').val()&&e.find('input[name="email"]').val()?e.find(".action .wpeo-button.button-disable").removeClass("button-disable"):e.find(".action .wpeo-button").addClass("button-disable")},window.eoxiaJS.digirisk.userDashboard.checkData=function(i){var e=i.closest("tr");return e.find(".tooltip.active").removeClass("active"),""===e.find('input[name="lastname"]').val()?(e.find('input[name="lastname"]').closest(".tooltip").addClass("active"),!1):""===e.find('input[name="firstname"]').val()?(e.find('input[name="firstname"]').closest(".tooltip").addClass("active"),!1):""!==e.find('input[name="email"]').val()||(e.find('input[name="email"]').closest(".tooltip").addClass("active"),!1)},window.eoxiaJS.digirisk.userDashboard.deletedUserSuccess=function(i,e){i.closest("tr").fadeOut()},window.eoxiaJS.digirisk.userDashboard.loadedUserSuccess=function(i,e){i.closest("tr").replaceWith(e.data.template)},window.eoxiaJS.digirisk.userDashboard.savedUserSuccess=function(i,e){jQuery(".user-dashboard table.users .email-already-used").hide(),e.data.error?jQuery(".user-dashboard table.users .email-already-used").show():(jQuery(".user-dashboard table.users").html(e.data.template),jQuery(".user-dashboard table.users tr:last input.lastname").focus())};var digi_user_detail={$:void 0,event:function(i){digi_user_detail.$=i,digi_user_detail.$(document).on("click","#wp-digi-form-add-staff .wp-digi-action-view-detail",function(i){digi_user_detail.load_staff_detail(i,digi_user_detail.$(this))}),digi_user_detail.$(document).on("click",".user-detail .load-data",function(i){digi_user_detail.load_data(i,digi_user_detail.$(this))})},load_staff_detail:function(i,e){i.preventDefault();var t=digi_user_detail.$(e).data("id"),a={action:"load_user_detail",_wpnonce:digi_user_detail.$(e).data("nonce"),user_id:t};digi_user_detail.$(".user-detail").addClass("wp-digi-bloc-loading"),digi_user_detail.$.post(window.ajaxurl,a,function(i){digi_user_detail.$(".user-detail").replaceWith(i.data.template)})},load_data:function(i,e){var t=digi_user_detail.$(e).closest("ul").data("user-id"),a={action:"load_data",_wpnonce:digi_user_detail.$(e).closest("ul").data("nonce"),user_id:t,data_name:digi_user_detail.$(e).data("name")};digi_user_detail.$(".user-detail .wp-digi-list").addClass("wp-digi-bloc-loading"),digi_user_detail.$.post(window.ajaxurl,a,function(i){digi_user_detail.$(".user-detail .wp-digi-list").replaceWith(i.data.template)})}};window.eoxiaJS.digirisk.ZIP={},window.eoxiaJS.digirisk.ZIP.init=function(){window.eoxiaJS.digirisk.ZIP.event()},window.eoxiaJS.digirisk.ZIP.event=function(){};